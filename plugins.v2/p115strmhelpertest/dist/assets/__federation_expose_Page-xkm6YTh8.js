import{importShared as e}from"./__federation_fn_import-B6DyUTOO.js";import{_ as l}from"./_plugin-vue_export-helper-BCo6x5W8.js";const{resolveComponent:a,createVNode:t,createElementVNode:i,withCtx:n,toDisplayString:s,createTextVNode:o,openBlock:r,createBlock:c,createCommentVNode:d,createElementBlock:u,renderList:m,Fragment:p,normalizeClass:f,mergeProps:_,withModifiers:g,withKeys:h}=await e("vue"),y={class:"plugin-page"},v={key:3,class:"my-1"},b={key:1},x={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},k=["title"],C={class:"text-caption",style:{"line-height":"1.2"}},w=["title"],P={class:"text-caption",style:{"line-height":"1.2"}},z={key:1,class:"text-caption text-error mt-1"},V={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},M=["title"],$={class:"text-caption",style:{"line-height":"1.2"}},T=["title"],E={class:"text-caption",style:{"line-height":"1.2"}},U={key:1,class:"text-caption text-error mt-1"},L={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},S=["title"],F={class:"text-caption",style:{"line-height":"1.2"}},B=["title"],I={class:"text-caption",style:{"line-height":"1.2"}},j={key:1,class:"text-caption text-error mt-1"},O={class:"path-mapping-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},H=["title"],R={class:"text-caption",style:{"line-height":"1.2"}},W=["title"],N={class:"text-caption",style:{"line-height":"1.2"}},A={key:1,class:"text-caption text-error mt-1"},K={class:"path-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},G={class:"d-flex align-center"},q=["title"],D={class:"text-caption",style:{"line-height":"1.2"}},Z={key:1,class:"text-caption text-error mt-1"},J={class:"path-group-item pa-2 border rounded-sm",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},Q=["title"],X={class:"text-caption",style:{"line-height":"1.2"}},Y=["title"],ee={class:"text-caption",style:{"line-height":"1.2"}},le={key:0,class:"mt-1 pt-1",style:{"border-top":"1px dashed rgba(var(--v-border-color), 0.2)"}},ae={key:0,class:"d-flex align-center"},te=["title"],ie={class:"text-caption",style:{"line-height":"1.2"}},ne={key:1,class:"text-caption text-error mt-1"},se={class:"d-flex"},oe={class:"text-body-2"},re={class:"d-flex"},ce={class:"text-body-2"},de={class:"d-flex align-center",style:{gap:"4px"}},ue={class:"d-flex align-center"},me={class:"text-no-wrap text-caption font-weight-medium",style:{"min-width":"40px","text-align":"right"}},pe={class:"pa-3"},fe={class:"d-flex justify-end mt-3"},_e={key:0,class:"d-flex justify-center my-3"},ge={key:1},{ref:he,reactive:ye,computed:ve,onMounted:be,watch:xe}=await e("vue"),ke=l({__name:"Page",props:{api:{type:[Object,Function],required:!0},initialConfig:{type:Object,default:()=>({})}},emits:["close","switch","update:config","action"],setup(e,{emit:l}){const ke=e,Ce=l,we=he(!0),Pe=he(!1),ze=he(!1),Ve=he(!1),Me=he(!1),$e=he(!1),Te=he(null),Ee=he(null),Ue=he("info"),Le=he(!1),Se=he(!1),Fe=he(!1),Be=ye({enabled:!1,has_client:!1,running:!1}),Ie=ye({name:null,is_vip:null,is_forever_vip:null,vip_expire_date:null,avatar:null,error:null,loading:!0}),je=ye({total:null,used:null,remaining:null,error:null,loading:!0}),Oe=ye({show:!1,activeTab:"tasks",loading:!1,adding:!1,error:null,addError:null,tasks:[],totalTasks:0,itemsPerPage:10,headers:[{title:"文件名",key:"name",align:"start",sortable:!1,minWidth:"200px"},{title:"大小",key:"size_text",align:"end",sortable:!1,cellProps:{class:"text-no-wrap"},minWidth:"80px"},{title:"状态",key:"status_text",align:"center",sortable:!1,minWidth:"80px"},{title:"进度",key:"progress",align:"start",sortable:!1,minWidth:"120px"}],links:"",destPath:""}),He=(e,l)=>{if(!e||!l)return 0;const a=e=>{if(!e||"string"!=typeof e)return 0;const l=parseFloat(e);return isNaN(l)?0:e.toUpperCase().includes("TB")?1024*l*1024:e.toUpperCase().includes("GB")?1024*l:(e.toUpperCase().includes("MB"),l)},t=a(e),i=a(l);return 0===i?0:Math.min(Math.max(t/i*100,0),100)},Re=ve(()=>{if(!ke.initialConfig)return!1;if(!(ke.initialConfig.enabled&&ke.initialConfig.cookies&&ke.initialConfig.moviepilot_address))return!1;const e=We(ke.initialConfig.transfer_monitor_paths)>0&&ke.initialConfig.transfer_monitor_enabled,l=We(ke.initialConfig.full_sync_strm_paths)>0&&ke.initialConfig.timing_full_sync_strm,a=We(ke.initialConfig.increment_sync_strm_paths)>0&&ke.initialConfig.increment_sync_strm_enabled,t=We(ke.initialConfig.monitor_life_paths)>0&&ke.initialConfig.monitor_life_enabled,i=ke.initialConfig.user_share_local_path&&ke.initialConfig.user_share_pan_path;return e||l||a||t||i}),We=e=>{if(!e)return 0;try{return e.split("\n").filter(e=>e.trim()&&e.includes("#")).length}catch(l){return console.error("解析路径字符串失败:",l),0}},Ne=e=>{if(!e)return 0;try{return e.split("\n").filter(e=>e.trim()).length}catch(l){return console.error("解析网盘整理路径字符串失败:",l),0}},Ae=async()=>{we.value=!0,Te.value=null;try{const l="P115StrmHelperTest",a=await ke.api.get(`plugin/${l}/get_status`);if(!a||0!==a.code||!a.data){if(ke.initialConfig){if(Be.enabled=Boolean(ke.initialConfig.enabled),Be.has_client=Boolean(ke.initialConfig.cookies&&""!==ke.initialConfig.cookies.trim()),Be.running=!1,$e.value=!0,Object.keys(ke.initialConfig).length<=1)try{const e=await ke.api.get(`plugin/${l}/get_config`);e&&(Object.assign(ke.initialConfig,e),console.log("从配置API获取配置:",ke.initialConfig))}catch(e){console.error("获取配置失败:",e)}throw new Error("状态API调用失败，使用配置数据显示状态")}throw new Error(a?.msg||"获取状态失败，请检查网络连接")}Be.enabled=Boolean(a.data.enabled),Be.has_client=Boolean(a.data.has_client),Be.running=Boolean(a.data.running);try{const e=await ke.api.get(`plugin/${l}/get_config`);e&&(Object.assign(ke.initialConfig,e),console.log("已获取最新配置:",ke.initialConfig))}catch(e){console.error("获取配置失败:",e)}$e.value=!0}catch(l){l.message.includes("使用配置数据显示状态")||(Te.value=`获取状态失败: ${l.message||"未知错误"}`),console.error("获取状态失败:",l)}finally{we.value=!1}},Ke=async()=>{Pe.value=!0,await Ae(),Be.has_client&&ke.initialConfig?.cookies?await fl():(Ie.loading=!1,je.loading=!1,ke.initialConfig?.cookies?Be.has_client||(Ie.error="115客户端未连接或Cookie无效。",je.error="115客户端未连接或Cookie无效。"):(Ie.error="请先配置115 Cookie。",je.error="请先配置115 Cookie。")),Pe.value=!1,Ee.value="状态已刷新",Ue.value="success",setTimeout(()=>{Ee.value=null},3e3)},Ge=async()=>{Se.value=!1,await De()},qe=async()=>{Fe.value=!1,await Ze()},De=async()=>{ze.value=!0,Le.value=!0,Te.value=null,Ee.value=null;try{if(!Be.enabled)throw new Error("插件未启用，请先在配置页面启用插件");if(!Be.has_client)throw new Error("插件未配置Cookie或Cookie无效，请先在配置页面设置115 Cookie");if(0===We(ke.initialConfig?.full_sync_strm_paths))throw new Error("未配置全量同步路径，请先在配置页面设置同步路径");const e="P115StrmHelperTest",l=await ke.api.post(`plugin/${e}/full_sync`);if(!l||0!==l.code)throw new Error(l?.msg||"启动全量同步失败");Ee.value=l.msg||"全量同步任务已启动",Ue.value="success",await Ae()}catch(e){Te.value=`启动全量同步失败: ${e.message||"未知错误"}`,console.error("启动全量同步失败:",e)}finally{ze.value=!1,Le.value=!1}},Ze=async()=>{Ve.value=!0,Le.value=!0,Te.value=null,Ee.value=null;try{if(!Be.enabled)throw new Error("插件未启用，请先在配置页面启用插件");if(!Be.has_client)throw new Error("插件未配置Cookie或Cookie无效，请先在配置页面设置115 Cookie");const e="P115StrmHelperTest",l=await ke.api.post(`plugin/${e}/full_sync_db`);if(!l||0!==l.code)throw new Error(l?.msg||"启动全量同步数据库失败");Ee.value=l.msg||"全量同步数据库任务已启动",Ue.value="success",await Ae()}catch(e){Te.value=`启动全量同步数据库失败: ${e.message||"未知错误"}`,console.error("启动全量同步数据库失败:",e)}finally{Ve.value=!1,Le.value=!1}},Je=ye({show:!1,error:null,shareLink:"",shareCode:"",receiveCode:"",panPath:"/",localPath:"",downloadMediaInfo:!1,shareMinFileSizeFormatted:""}),Qe=ve(()=>!!Je.localPath&&(!(!Je.shareLink&&!Je.shareCode)&&!(Je.shareCode&&!Je.receiveCode))),Xe=ye({show:!1,isLocal:!0,loading:!1,error:null,currentPath:"/",items:[],selectedPath:"",callback:null}),Ye=()=>{Je.show=!0,Je.error=null,ke.initialConfig&&(Je.shareLink=ke.initialConfig.user_share_link||"",Je.shareCode=ke.initialConfig.user_share_code||"",Je.receiveCode=ke.initialConfig.user_receive_code||"",Je.panPath=ke.initialConfig.user_share_pan_path||"/",Je.localPath=ke.initialConfig.user_share_local_path||"",Je.downloadMediaInfo=ke.initialConfig.share_strm_auto_download_mediainfo_enabled||!1,Je.shareMinFileSizeFormatted=((e,l=2)=>{if(!+e)return"";const a=l<0?0:l,t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(a))} ${["B","K","M","G","T"][t]}`})(ke.initialConfig.share_strm_min_file_size||0))},el=()=>{Je.show=!1},ll=async()=>{Xe.loading=!0,Xe.error=null,Xe.items=[];try{if(Xe.isLocal)try{const e=await ke.api.post("storage/list",{path:Xe.currentPath||"/",type:"share",flag:"ROOT"});if(!e||!Array.isArray(e))throw new Error("浏览目录失败：无效响应");Xe.items=e.filter(e=>"dir"===e.type).map(e=>({name:e.name,path:e.path,is_dir:!0})).sort((e,l)=>e.name.localeCompare(l.name,void 0,{numeric:!0,sensitivity:"base"}))}catch(Te){console.error("浏览本地目录失败:",Te),Xe.error=`浏览本地目录失败: ${Te.message||"未知错误"}`,Xe.items=[]}else{const e="P115StrmHelperTest";if(!ke.initialConfig?.cookies||""===ke.initialConfig?.cookies.trim())throw new Error("请先设置115 Cookie才能浏览网盘目录");const l=await ke.api.get(`plugin/${e}/browse_dir?path=${encodeURIComponent(Xe.currentPath)}&is_local=${Xe.isLocal}`);if(!l||0!==l.code||!l.data)throw new Error(l?.msg||"获取网盘目录内容失败");Xe.items=l.data.items.filter(e=>e.is_dir),Xe.currentPath=l.data.path||Xe.currentPath}}catch(Te){console.error("加载目录内容失败:",Te),Xe.error=Te.message||"获取目录内容失败",(Te.message.includes("Cookie")||Te.message.includes("cookie"))&&(Xe.items=[])}finally{Xe.loading=!1}},al=()=>{const e=Xe.currentPath;if(!Xe.isLocal){if("/"===e)return;let l=e.replace(/\\/g,"/");l.length>1&&l.endsWith("/")&&(l=l.slice(0,-1));const a=l.substring(0,l.lastIndexOf("/"));return Xe.currentPath=""===a?"/":a,void ll()}if("/"===e||"C:\\"===e||"C:/"===e)return;const l=e.replace(/\\/g,"/"),a=l.split("/").filter(Boolean);0===a.length?Xe.currentPath="/":1===a.length&&l.includes(":")?Xe.currentPath=a[0]+":/":(a.pop(),Xe.currentPath=0===a.length?"/":(l.startsWith("/")?"/":"")+a.join("/")+"/"),ll()},tl=()=>{if(!Xe.currentPath)return;let e=Xe.currentPath;"/"===e||/^[a-zA-Z]:[\\\/]$/.test(e)||!e.endsWith("/")&&!e.endsWith("\\\\")||(e=e.slice(0,-1)),"function"==typeof Xe.callback&&Xe.callback(e),il()},il=()=>{Xe.show=!1,Xe.items=[],Xe.error=null},nl=async()=>{Me.value=!0,Je.error=null;try{if(!Je.localPath)throw new Error("请先设置本地生成STRM路径");if(!Je.shareLink&&!Je.shareCode)throw new Error("请输入115网盘分享链接或分享码");if(Je.shareCode&&!Je.receiveCode)throw new Error("使用分享码时必须输入分享密码");const e="P115StrmHelperTest";ke.initialConfig&&(ke.initialConfig.user_share_link=Je.shareLink,ke.initialConfig.user_share_code=Je.shareCode,ke.initialConfig.user_receive_code=Je.receiveCode,ke.initialConfig.user_share_pan_path=Je.panPath,ke.initialConfig.user_share_local_path=Je.localPath,ke.initialConfig.share_strm_auto_download_mediainfo_enabled=Je.downloadMediaInfo,ke.initialConfig.share_strm_min_file_size=(e=>{if(!e||"string"!=typeof e)return 0;const l=e.trim().match(/^(\d*\.?\d+)\s*(k|m|g|t)?b?$/i);if(!l)return 0;const a=parseFloat(l[1]);switch((l[2]||"").toLowerCase()){case"t":return Math.round(1024*a*1024*1024*1024);case"g":return Math.round(1024*a*1024*1024);case"m":return Math.round(1024*a*1024);case"k":return Math.round(1024*a);default:return Math.round(a)}})(Je.shareMinFileSizeFormatted),await ke.api.post(`plugin/${e}/save_config`,ke.initialConfig));const l=await ke.api.post(`plugin/${e}/share_sync`);if(!l||0!==l.code)throw new Error(l?.msg||"启动分享同步失败");Ee.value=l.msg||"分享同步任务已启动",Ue.value="success",await Ae(),el()}catch(e){Je.error=`启动分享同步失败: ${e.message||"未知错误"}`,console.error("启动分享同步失败:",e)}finally{Me.value=!1}},sl=()=>{Oe.show=!0,Oe.activeTab="tasks",Oe.error=null,Oe.addError=null},ol=()=>{Oe.show=!1,Oe.tasks=[],Oe.totalTasks=0,Oe.links="",Oe.destPath=""},rl=async({page:e,itemsPerPage:l})=>{Oe.loading=!0,Oe.error=null;try{const a="P115StrmHelperTest",t=await ke.api.post(`plugin/${a}/offline_tasks`,{page:e,limit:l});if(!t||0!==t.code||!t.data)throw new Error(t?.msg||"获取离线任务列表失败");Oe.tasks=t.data.tasks||[],Oe.totalTasks=t.data.total||0}catch(a){Oe.error=`获取任务失败: ${a.message||"未知错误"}`,console.error("获取离线任务失败:",a),Oe.tasks=[],Oe.totalTasks=0}finally{Oe.loading=!1}},cl=async()=>{if(Oe.links.trim()){Oe.adding=!0,Oe.addError=null;try{const e="P115StrmHelperTest",l=Oe.links.split("\n").map(e=>e.trim()).filter(Boolean),a=await ke.api.post(`plugin/${e}/add_offline_task`,{links:l,path:Oe.destPath||null});if(!a||0!==a.code)throw new Error(a?.msg||"添加离线任务失败");Ee.value=a.msg||"离线任务添加成功",Ue.value="success",Oe.links="",Oe.destPath="",Oe.activeTab="tasks",rl({page:1,itemsPerPage:Oe.itemsPerPage})}catch(e){Oe.addError=`添加任务失败: ${e.message||"未知错误"}`,console.error("添加离线任务失败:",e)}finally{Oe.adding=!1}}else Oe.addError="下载链接不能为空。"},dl=()=>{Xe.show=!0,Xe.isLocal=!1,Xe.loading=!1,Xe.error=null,Xe.items=[],Xe.currentPath=Oe.destPath||"/",Xe.callback=e=>{Oe.destPath=e},ll()},ul=e=>{switch(e){case 0:return"info";case 1:return"error";case 2:return"success";case 3:return"warning";default:return"grey"}},ml=e=>{if(!e)return[];try{return e.split("\n").filter(e=>e.trim()&&e.includes("#")).map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}})}catch(l){return console.error("解析路径字符串失败:",l),[]}},pl=e=>{if(!e)return[];try{return e.split("\n").filter(e=>e.trim()).map(e=>({path:e}))}catch(l){return console.error("解析网盘整理路径字符串失败:",l),[]}};async function fl(){Ie.loading=!0,Ie.error=null,je.loading=!0,je.error=null;try{const e="P115StrmHelperTest",l=await ke.api.get(`plugin/${e}/user_storage_status`);if(l&&l.success)l.user_info?Object.assign(Ie,l.user_info):Ie.error="未能获取有效的用户信息。",l.storage_info?Object.assign(je,l.storage_info):je.error="未能获取有效的存储空间信息。";else{const e=l?.error_message||"获取用户和存储信息失败。";Ie.error=e,je.error=e,(e.includes("Cookie")||e.includes("未配置"))&&(Be.has_client=!1)}}catch(e){console.error("获取用户/存储状态失败:",e);const l=`请求用户/存储状态时出错: ${e.message||"未知网络错误"}`;Ie.error=l,je.error=l}finally{Ie.loading=!1,je.loading=!1}}return xe(()=>ke.initialConfig,e=>{e&&(Be.enabled=e.enabled||!1,Be.has_client=Boolean(e.cookies&&""!==e.cookies.trim()))},{immediate:!0}),be(async()=>{await Ae(),Be.has_client&&ke.initialConfig?.cookies?await fl():(Ie.loading=!1,je.loading=!1,ke.initialConfig?.cookies?Be.has_client||(Ie.error="115客户端未连接或Cookie无效。",je.error="115客户端未连接或Cookie无效。"):(Ie.error="请先配置115 Cookie。",je.error="请先配置115 Cookie。"))}),(l,he)=>{const ye=a("v-icon"),ve=a("v-card-title"),be=a("v-alert"),xe=a("v-skeleton-loader"),ke=a("v-list-item-title"),Ae=a("v-chip"),De=a("v-list-item"),Ze=a("v-divider"),fl=a("v-list"),_l=a("v-card-text"),gl=a("v-card"),hl=a("v-img"),yl=a("v-avatar"),vl=a("v-list-item-subtitle"),bl=a("v-progress-linear"),xl=a("v-col"),kl=a("v-row"),Cl=a("v-btn"),wl=a("v-menu"),Pl=a("v-card-actions"),zl=a("v-text-field"),Vl=a("v-switch"),Ml=a("v-spacer"),$l=a("v-dialog"),Tl=a("v-tab"),El=a("v-tabs"),Ul=a("v-data-table-server"),Ll=a("v-window-item"),Sl=a("v-textarea"),Fl=a("v-window"),Bl=a("v-progress-circular");return r(),u(p,null,[i("div",y,[t(gl,{flat:"",class:"rounded border",style:{display:"flex","flex-direction":"column","max-height":"85vh"}},{default:n(()=>[t(ve,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:n(()=>[t(ye,{icon:"mdi-file-link",class:"mr-2",color:"primary",size:"small"}),he[32]||(he[32]=i("span",null,"115网盘STRM助手",-1))]),_:1}),t(_l,{class:"px-3 py-1",style:{"flex-grow":"1","overflow-y":"auto","padding-bottom":"48px"}},{default:n(()=>[Te.value?(r(),c(be,{key:0,type:"error",density:"compact",class:"mb-2",variant:"tonal",closable:""},{default:n(()=>[o(s(Te.value),1)]),_:1})):d("",!0),Ee.value?(r(),c(be,{key:1,type:Ue.value,density:"compact",class:"mb-2",variant:"tonal",closable:""},{default:n(()=>[o(s(Ee.value),1)]),_:1},8,["type"])):d("",!0),we.value&&!$e.value?(r(),c(xe,{key:2,type:"article, actions"})):d("",!0),$e.value?(r(),u("div",v,[t(kl,null,{default:n(()=>[t(xl,{cols:"12",md:"6"},{default:n(()=>[t(gl,{flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(ve,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:n(()=>[t(ye,{icon:"mdi-information",class:"mr-2",color:"primary",size:"small"}),he[33]||(he[33]=i("span",null,"系统状态",-1))]),_:1}),t(_l,{class:"pa-0"},{default:n(()=>[t(fl,{class:"bg-transparent pa-0"},{default:n(()=>[t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:Be.enabled?"success":"grey",icon:"mdi-power",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:Be.enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(Be.enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[34]||(he[34]=[o("插件状态")])),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:Be.has_client&&e.initialConfig?.cookies?"success":"error",icon:"mdi-account-check",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:Be.has_client&&e.initialConfig?.cookies?"success":"error",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(Be.has_client&&e.initialConfig?.cookies?"已连接":"未连接"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[35]||(he[35]=[o("115客户端状态")])),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:Be.running?"warning":"success",icon:"mdi-play-circle",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:Be.running?"warning":"success",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(Be.running?"运行中":"空闲"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[36]||(he[36]=[o("任务状态")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(gl,{flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(ve,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:n(()=>[t(ye,{icon:"mdi-account-box",class:"mr-2",color:"primary",size:"small"}),he[37]||(he[37]=i("span",null,"115账户信息",-1))]),_:1}),t(_l,{class:"pa-0"},{default:n(()=>[Ie.loading||je.loading?(r(),c(xe,{key:0,type:"list-item-avatar-three-line, list-item-three-line"})):(r(),u("div",b,[Ie.error||je.error?(r(),c(be,{key:0,type:"warning",density:"compact",class:"ma-2",variant:"tonal"},{default:n(()=>[o(s(Ie.error||je.error),1)]),_:1})):(r(),c(fl,{key:1,class:"bg-transparent pa-0"},{default:n(()=>[t(De,{class:"px-3 py-1"},{prepend:n(()=>[t(yl,{size:"32",class:"mr-2"},{default:n(()=>[Ie.avatar?(r(),c(hl,{key:0,src:Ie.avatar,alt:Ie.name},null,8,["src","alt"])):(r(),c(ye,{key:1,icon:"mdi-account-circle"}))]),_:1})]),default:n(()=>[t(ke,{class:"text-body-1 font-weight-medium"},{default:n(()=>[o(s(Ie.name||"未知用户"),1)]),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-1"},{prepend:n(()=>[t(ye,{color:Ie.is_vip?"amber-darken-2":"grey",icon:"mdi-shield-crown",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:Ie.is_vip?"success":"grey",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(Ie.is_vip?Ie.is_forever_vip?"永久VIP":`VIP (至 ${Ie.vip_expire_date||"N/A"})`:"非VIP"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[38]||(he[38]=[o("VIP状态")])),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-1"},{default:n(()=>[t(ke,{class:"text-body-2 mb-1"},{default:n(()=>he[39]||(he[39]=[o("存储空间")])),_:1}),je.used&&je.total?(r(),c(vl,{key:0,class:"text-caption"},{default:n(()=>[o(" 已用 "+s(je.used)+" / 总共 "+s(je.total)+" (剩余 "+s(je.remaining)+") ",1)]),_:1})):d("",!0),je.used&&je.total?(r(),c(bl,{key:1,"model-value":He(je.used,je.total),color:"primary",height:"6",rounded:"",class:"mt-1"},null,8,["model-value"])):(r(),c(vl,{key:2,class:"text-caption text-grey"},{default:n(()=>he[40]||(he[40]=[o(" 存储信息不可用 ")])),_:1}))]),_:1})]),_:1}))]))]),_:1})]),_:1}),t(gl,{flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(ve,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:n(()=>[t(ye,{icon:"mdi-puzzle",class:"mr-2",color:"primary",size:"small"}),he[41]||(he[41]=i("span",null,"功能配置",-1))]),_:1}),t(_l,{class:"pa-0"},{default:n(()=>[t(fl,{class:"bg-transparent pa-0"},{default:n(()=>[t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:e.initialConfig?.transfer_monitor_enabled?"success":"grey",icon:"mdi-file-move",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:e.initialConfig?.transfer_monitor_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(e.initialConfig?.transfer_monitor_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[42]||(he[42]=[o("监控MP整理")])),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:e.initialConfig?.timing_full_sync_strm?"success":"grey",icon:"mdi-sync",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:e.initialConfig?.timing_full_sync_strm?"success":"grey",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(e.initialConfig?.timing_full_sync_strm?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[43]||(he[43]=[o("定期全量同步")])),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:e.initialConfig?.increment_sync_strm_enabled?"success":"grey",icon:"mdi-book-sync",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:e.initialConfig?.increment_sync_strm_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(e.initialConfig?.increment_sync_strm_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[44]||(he[44]=[o("定期增量同步")])),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:e.initialConfig?.monitor_life_enabled?"success":"grey",icon:"mdi-calendar-heart",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:e.initialConfig?.monitor_life_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(e.initialConfig?.monitor_life_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[45]||(he[45]=[o("监控115生活事件")])),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:e.initialConfig?.pan_transfer_enabled?"success":"grey",icon:"mdi-transfer",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:e.initialConfig?.pan_transfer_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(e.initialConfig?.pan_transfer_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[46]||(he[46]=[o("网盘整理")])),_:1})]),_:1}),t(Ze,{class:"my-0"}),t(De,{class:"px-3 py-0",style:{"min-height":"34px"}},{prepend:n(()=>[t(ye,{color:e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"success":"grey",icon:"mdi-broom",size:"small"},null,8,["color"])]),append:n(()=>[t(Ae,{color:e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"success":"grey",size:"x-small",variant:"tonal"},{default:n(()=>[o(s(e.initialConfig?.clear_recyclebin_enabled||e.initialConfig?.clear_receive_path_enabled?"已启用":"已禁用"),1)]),_:1},8,["color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[47]||(he[47]=[o("定期清理")])),_:1})]),_:1}),t(Ze,{class:"my-0"})]),_:1})]),_:1})]),_:1})]),_:1}),t(xl,{cols:"12",md:"6"},{default:n(()=>[t(gl,{flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(ve,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-gradient"},{default:n(()=>[t(ye,{icon:"mdi-folder-search",class:"mr-2",color:"primary",size:"small"}),he[48]||(he[48]=i("span",null,"路径配置",-1))]),_:1}),t(_l,{class:"pa-0"},{default:n(()=>[t(fl,{class:"bg-transparent pa-0"},{default:n(()=>[e.initialConfig?.transfer_monitor_enabled?(r(),c(De,{key:0,class:"px-3 py-2"},{default:n(()=>[i("div",null,[he[54]||(he[54]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"监控MP整理路径",-1)),We(e.initialConfig?.transfer_monitor_paths)>0?(r(!0),u(p,{key:0},m(ml(e.initialConfig?.transfer_monitor_paths),(e,l)=>(r(),u(p,{key:`transfer-${l}`},[l>0?(r(),c(Ze,{key:0,class:"my-1"})):d("",!0),i("div",x,[t(kl,{dense:"",align:"center"},{default:n(()=>[t(xl,{cols:"12",sm:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:n(()=>he[49]||(he[49]=[o("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[he[50]||(he[50]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",C,s(e.local||"-"),1)],8,k)]),_:2},1024),t(xl,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:n(()=>[t(ye,{color:"primary",class:"icon-spin-animation"},{default:n(()=>he[51]||(he[51]=[o("mdi-sync")])),_:1})]),_:1}),t(xl,{cols:"12",sm:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:n(()=>he[52]||(he[52]=[o("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[he[53]||(he[53]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",P,s(e.remote||"-"),1)],8,w)]),_:2},1024)]),_:2},1024)])],64))),128)):(r(),u("div",z,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.transfer_monitor_enabled&&(e.initialConfig?.increment_sync_strm_enabled||e.initialConfig?.timing_full_sync_strm||e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(r(),c(Ze,{key:1,class:"my-0"})):d("",!0),e.initialConfig?.timing_full_sync_strm?(r(),c(De,{key:2,class:"px-3 py-2"},{default:n(()=>[i("div",null,[he[60]||(he[60]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"全量同步路径",-1)),We(e.initialConfig?.full_sync_strm_paths)>0?(r(!0),u(p,{key:0},m(ml(e.initialConfig?.full_sync_strm_paths),(e,l)=>(r(),u(p,{key:`fullsync-${l}`},[l>0?(r(),c(Ze,{key:0,class:"my-1"})):d("",!0),i("div",V,[t(kl,{dense:"",align:"center"},{default:n(()=>[t(xl,{cols:"12",sm:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:n(()=>he[55]||(he[55]=[o("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[he[56]||(he[56]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",$,s(e.local||"-"),1)],8,M)]),_:2},1024),t(xl,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:n(()=>[t(ye,{color:"primary",class:"icon-spin-animation"},{default:n(()=>he[57]||(he[57]=[o("mdi-sync")])),_:1})]),_:1}),t(xl,{cols:"12",sm:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:n(()=>he[58]||(he[58]=[o("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[he[59]||(he[59]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",E,s(e.remote||"-"),1)],8,T)]),_:2},1024)]),_:2},1024)])],64))),128)):(r(),u("div",U,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.timing_full_sync_strm&&(e.initialConfig?.increment_sync_strm_enabled||e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(r(),c(Ze,{key:3,class:"my-0"})):d("",!0),e.initialConfig?.increment_sync_strm_enabled?(r(),c(De,{key:4,class:"px-3 py-2"},{default:n(()=>[i("div",null,[he[66]||(he[66]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"增量同步路径",-1)),We(e.initialConfig?.increment_sync_strm_paths)>0?(r(!0),u(p,{key:0},m(ml(e.initialConfig?.increment_sync_strm_paths),(e,l)=>(r(),u(p,{key:`incsync-${l}`},[l>0?(r(),c(Ze,{key:0,class:"my-1"})):d("",!0),i("div",L,[t(kl,{dense:"",align:"center"},{default:n(()=>[t(xl,{cols:"12",sm:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:n(()=>he[61]||(he[61]=[o("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[he[62]||(he[62]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",F,s(e.local||"-"),1)],8,S)]),_:2},1024),t(xl,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:n(()=>[t(ye,{color:"primary",class:"icon-spin-animation"},{default:n(()=>he[63]||(he[63]=[o("mdi-sync")])),_:1})]),_:1}),t(xl,{cols:"12",sm:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:n(()=>he[64]||(he[64]=[o("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[he[65]||(he[65]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",I,s(e.remote||"-"),1)],8,B)]),_:2},1024)]),_:2},1024)])],64))),128)):(r(),u("div",j,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.increment_sync_strm_enabled&&(e.initialConfig?.monitor_life_enabled||e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(r(),c(Ze,{key:5,class:"my-0"})):d("",!0),e.initialConfig?.monitor_life_enabled?(r(),c(De,{key:6,class:"px-3 py-2"},{default:n(()=>[i("div",null,[he[72]||(he[72]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"监控115生活事件路径",-1)),We(e.initialConfig?.monitor_life_paths)>0?(r(!0),u(p,{key:0},m(ml(e.initialConfig?.monitor_life_paths),(e,l)=>(r(),u(p,{key:`life-${l}`},[l>0?(r(),c(Ze,{key:0,class:"my-1"})):d("",!0),i("div",O,[t(kl,{dense:"",align:"center"},{default:n(()=>[t(xl,{cols:"12",sm:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:n(()=>he[67]||(he[67]=[o("mdi-folder-home")])),_:1}),i("div",{class:"text-truncate w-100",title:e.local},[he[68]||(he[68]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地目录",-1)),i("span",R,s(e.local||"-"),1)],8,H)]),_:2},1024),t(xl,{cols:"12",sm:"2",class:"text-center my-1 my-sm-0"},{default:n(()=>[t(ye,{color:"primary",class:"icon-spin-animation"},{default:n(()=>he[69]||(he[69]=[o("mdi-sync")])),_:1})]),_:1}),t(xl,{cols:"12",sm:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:n(()=>he[70]||(he[70]=[o("mdi-cloud")])),_:1}),i("div",{class:"text-truncate w-100",title:e.remote},[he[71]||(he[71]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘目录",-1)),i("span",N,s(e.remote||"-"),1)],8,W)]),_:2},1024)]),_:2},1024)])],64))),128)):(r(),u("div",A,"未配置路径"))])]),_:1})):d("",!0),e.initialConfig?.monitor_life_enabled&&(e.initialConfig?.pan_transfer_enabled||e.initialConfig?.directory_upload_enabled)?(r(),c(Ze,{key:7,class:"my-0"})):d("",!0),e.initialConfig?.pan_transfer_enabled?(r(),c(De,{key:8,class:"px-3 py-2"},{default:n(()=>[i("div",null,[he[75]||(he[75]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"网盘整理目录",-1)),Ne(e.initialConfig?.pan_transfer_paths)>0?(r(!0),u(p,{key:0},m(pl(e.initialConfig?.pan_transfer_paths),(e,l)=>(r(),u(p,{key:`pan-${l}`},[l>0?(r(),c(Ze,{key:0,class:"my-1"})):d("",!0),i("div",K,[i("div",G,[t(ye,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:n(()=>he[73]||(he[73]=[o("mdi-folder-arrow-down")])),_:1}),i("div",{class:"text-truncate w-100",title:e.path},[he[74]||(he[74]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"待整理网盘目录",-1)),i("span",D,s(e.path),1)],8,q)])])],64))),128)):(r(),u("div",Z,"未配置网盘整理目录"))])]),_:1})):d("",!0),e.initialConfig?.pan_transfer_enabled&&e.initialConfig?.directory_upload_enabled?(r(),c(Ze,{key:9,class:"my-0"})):d("",!0),e.initialConfig?.directory_upload_enabled?(r(),c(De,{key:10,class:"px-3 py-2"},{default:n(()=>[i("div",null,[he[83]||(he[83]=i("div",{class:"text-body-2 font-weight-medium mb-1"},"目录上传路径",-1)),e.initialConfig?.directory_upload_path&&e.initialConfig.directory_upload_path.length>0?(r(!0),u(p,{key:0},m(e.initialConfig.directory_upload_path,(e,l)=>(r(),u(p,{key:`upload-group-${l}`},[l>0?(r(),c(Ze,{key:0,class:"my-1"})):d("",!0),i("div",J,[t(kl,{dense:"",align:"center"},{default:n(()=>[t(xl,{cols:"12",md:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"primary",class:"mr-2 flex-shrink-0"},{default:n(()=>he[76]||(he[76]=[o("mdi-folder-table")])),_:1}),i("div",{class:"text-truncate w-100",title:e.src},[he[77]||(he[77]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地监控",-1)),i("span",X,s(e.src||"-"),1)],8,Q)]),_:2},1024),t(xl,{cols:"12",md:"2",class:"text-center my-1 my-md-0"},{default:n(()=>[t(ye,{color:"primary",class:"icon-spin-animation"},{default:n(()=>he[78]||(he[78]=[o("mdi-sync")])),_:1})]),_:1}),t(xl,{cols:"12",md:"5",class:"d-flex align-center"},{default:n(()=>[t(ye,{size:"small",color:"success",class:"mr-2 flex-shrink-0"},{default:n(()=>he[79]||(he[79]=[o("mdi-cloud-upload")])),_:1}),i("div",{class:"text-truncate w-100",title:e.dest_remote},[he[80]||(he[80]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"网盘上传",-1)),i("span",ee,s(e.dest_remote||"-"),1)],8,Y)]),_:2},1024)]),_:2},1024),e.dest_local||"boolean"==typeof e.delete?(r(),u("div",le,[t(kl,{dense:"",align:"center",class:"mt-1"},{default:n(()=>[t(xl,{cols:"12",md:"boolean"==typeof e.delete?7:12},{default:n(()=>[e.dest_local?(r(),u("div",ae,[t(ye,{size:"small",color:"warning",class:"mr-2 flex-shrink-0"},{default:n(()=>he[81]||(he[81]=[o("mdi-content-copy")])),_:1}),i("div",{class:"text-truncate w-100",title:e.dest_local},[he[82]||(he[82]=i("span",{class:"text-caption font-weight-medium d-block",style:{"line-height":"1.2"}},"本地复制",-1)),i("span",ie,s(e.dest_local),1)],8,te)])):d("",!0)]),_:2},1032,["md"]),"boolean"==typeof e.delete?(r(),c(xl,{key:0,cols:"12",md:e.dest_local?5:12,class:f(["d-flex align-center",{"justify-md-end":e.dest_local,"mt-1 mt-md-0":e.dest_local}])},{default:n(()=>[t(ye,{size:"small",color:e.delete?"error":"grey-darken-1",class:"mr-1 flex-shrink-0"},{default:n(()=>[o(s(e.delete?"mdi-delete":"mdi-delete-off"),1)]),_:2},1032,["color"]),i("span",{class:f(["text-caption",e.delete?"text-error":"text-grey-darken-1"])},s(e.delete?"删除源":"不删源"),3)]),_:2},1032,["md","class"])):d("",!0)]),_:2},1024)])):d("",!0)])],64))),128)):(r(),u("div",ne,"未配置路径"))])]),_:1})):d("",!0)]),_:1})]),_:1})]),_:1}),Be.has_client&&e.initialConfig.cookies?Re.value?d("",!0):(r(),c(gl,{key:1,flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(_l,{class:"pa-3"},{default:n(()=>[i("div",re,[t(ye,{icon:"mdi-alert-circle",color:"warning",class:"mr-2",size:"small"}),i("div",ce,[he[90]||(he[90]=i("p",{class:"mb-1"},[i("strong",null,"路径配置不完整")],-1)),he[91]||(he[91]=i("p",{class:"mb-0"},"您已配置115 Cookie，但部分功能路径未配置。请前往配置页面完善路径设置。",-1)),t(Cl,{color:"primary",variant:"text",size:"small",class:"mt-1 px-2 py-0",onClick:he[1]||(he[1]=e=>Ce("switch"))},{default:n(()=>[t(ye,{size:"small",class:"mr-1"},{default:n(()=>he[88]||(he[88]=[o("mdi-cog")])),_:1}),he[89]||(he[89]=o("前往配置 "))]),_:1})])])]),_:1})]),_:1})):(r(),c(gl,{key:0,flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(_l,{class:"pa-3"},{default:n(()=>[i("div",se,[t(ye,{icon:"mdi-alert-circle",color:"error",class:"mr-2",size:"small"}),i("div",oe,[he[86]||(he[86]=i("p",{class:"mb-1"},[i("strong",null,"未配置115 Cookie或Cookie无效")],-1)),he[87]||(he[87]=i("p",{class:"mb-0"},"请在配置页面中设置有效的115网盘Cookie，可通过扫码登录获取。",-1)),t(Cl,{color:"primary",variant:"text",size:"small",class:"mt-1 px-2 py-0",onClick:he[0]||(he[0]=e=>Ce("switch"))},{default:n(()=>[t(ye,{size:"small",class:"mr-1"},{default:n(()=>he[84]||(he[84]=[o("mdi-cog")])),_:1}),he[85]||(he[85]=o("前往配置 "))]),_:1})])])]),_:1})]),_:1}))]),_:1})]),_:1}),t(gl,{flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(_l,{class:"d-flex align-center px-3 py-1"},{default:n(()=>[t(ye,{icon:"mdi-information",color:"info",class:"mr-2",size:"small"}),he[92]||(he[92]=i("span",{class:"text-body-2"},' 点击"配置"按钮进行设置，"全量同步"和"分享同步"按钮可立即执行相应任务。 ',-1))]),_:1})]),_:1})])):d("",!0)]),_:1}),t(Ze),t(Pl,{class:"px-2 py-1 sticky-actions d-flex justify-space-between align-center",style:{"flex-shrink":"0",gap:"8px"}},{default:n(()=>[t(Cl,{color:"info",onClick:Ke,"prepend-icon":"mdi-refresh",disabled:Pe.value,loading:Pe.value,variant:"text",size:"small"},{default:n(()=>he[93]||(he[93]=[o("刷新状态")])),_:1},8,["disabled","loading"]),i("div",de,[t(wl,{"offset-y":""},{activator:n(({props:e})=>[t(Cl,_(e,{variant:"text",size:"small","append-icon":"mdi-dots-vertical"}),{default:n(()=>he[94]||(he[94]=[o(" 更多 ")])),_:2},1040)]),default:n(()=>[t(fl,{density:"compact"},{default:n(()=>[t(De,{onClick:he[2]||(he[2]=e=>Se.value=!0),disabled:!Be.enabled||!Be.has_client||Le.value},{prepend:n(()=>[t(ye,{color:"warning"},{default:n(()=>he[95]||(he[95]=[o("mdi-sync")])),_:1})]),default:n(()=>[t(ke,null,{default:n(()=>he[96]||(he[96]=[o("全量同步")])),_:1})]),_:1},8,["disabled"]),t(De,{onClick:he[3]||(he[3]=e=>Fe.value=!0),disabled:!Be.enabled||!Be.has_client||Le.value},{prepend:n(()=>[t(ye,{color:"primary"},{default:n(()=>he[97]||(he[97]=[o("mdi-database-sync")])),_:1})]),default:n(()=>[t(ke,null,{default:n(()=>he[98]||(he[98]=[o("全量同步数据库")])),_:1})]),_:1},8,["disabled"]),t(De,{onClick:Ye,disabled:!Be.enabled||!Be.has_client||Le.value,loading:Me.value},{prepend:n(()=>[t(ye,{color:"info"},{default:n(()=>he[99]||(he[99]=[o("mdi-share-variant")])),_:1})]),default:n(()=>[t(ke,null,{default:n(()=>he[100]||(he[100]=[o("分享同步")])),_:1})]),_:1},8,["disabled","loading"]),t(De,{onClick:sl,disabled:!Be.enabled||!Be.has_client||Le.value},{prepend:n(()=>[t(ye,{color:"secondary"},{default:n(()=>he[101]||(he[101]=[o("mdi-cloud-download-outline")])),_:1})]),default:n(()=>[t(ke,null,{default:n(()=>he[102]||(he[102]=[o("离线下载")])),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),t(Cl,{color:"primary",onClick:he[4]||(he[4]=e=>Ce("switch")),"prepend-icon":"mdi-cog",variant:"text",size:"small"},{default:n(()=>he[103]||(he[103]=[o("配置")])),_:1}),t(Cl,{color:"error",onClick:he[5]||(he[5]=e=>Ce("close")),variant:"flat",size:"small",class:"custom-close-btn","aria-label":"关闭",style:{"min-width":"auto !important",padding:"0 10px !important",height:"28px !important","line-height":"28px !important"}},{default:n(()=>[t(ye,{size:"small"},{default:n(()=>he[104]||(he[104]=[o("mdi-close")])),_:1})]),_:1})])]),_:1})]),_:1})]),t($l,{modelValue:Je.show,"onUpdate:modelValue":he[14]||(he[14]=e=>Je.show=e),"max-width":"600"},{default:n(()=>[t(gl,null,{default:n(()=>[t(ve,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:n(()=>[t(ye,{icon:"mdi-share-variant",class:"mr-2",color:"primary",size:"small"}),he[105]||(he[105]=i("span",null,"115网盘分享同步",-1))]),_:1}),t(_l,{class:"px-3 py-2"},{default:n(()=>[Je.error?(r(),c(be,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal"},{default:n(()=>[o(s(Je.error),1)]),_:1})):d("",!0),t(kl,null,{default:n(()=>[t(xl,{cols:"12"},{default:n(()=>[t(zl,{modelValue:Je.shareLink,"onUpdate:modelValue":he[6]||(he[6]=e=>Je.shareLink=e),label:"分享链接",hint:"115网盘分享链接","persistent-hint":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(kl,null,{default:n(()=>[t(xl,{cols:"12",md:"6"},{default:n(()=>[t(zl,{modelValue:Je.shareCode,"onUpdate:modelValue":he[7]||(he[7]=e=>Je.shareCode=e),label:"分享码",hint:"分享码，和分享链接选填一项","persistent-hint":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(xl,{cols:"12",md:"6"},{default:n(()=>[t(zl,{modelValue:Je.receiveCode,"onUpdate:modelValue":he[8]||(he[8]=e=>Je.receiveCode=e),label:"分享密码",hint:"分享密码，如有则必填","persistent-hint":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(kl,null,{default:n(()=>[t(xl,{cols:"12",md:"6"},{default:n(()=>[t(zl,{modelValue:Je.panPath,"onUpdate:modelValue":he[9]||(he[9]=e=>Je.panPath=e),label:"分享文件夹路径",hint:"分享内容列表中的相对路径，默认为根目录 /。例如，若分享链接指向一个文件夹，此路径为该文件夹内的子路径。","persistent-hint":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(xl,{cols:"12",md:"6"},{default:n(()=>[t(zl,{modelValue:Je.localPath,"onUpdate:modelValue":he[10]||(he[10]=e=>Je.localPath=e),label:"本地生成STRM路径",hint:"本地生成STRM文件的路径","persistent-hint":"",variant:"outlined",density:"compact","append-icon":"mdi-folder","onClick:append":he[11]||(he[11]=e=>{return l="local",Xe.show=!0,Xe.isLocal="local"===l,Xe.loading=!1,Xe.error=null,Xe.items=[],Xe.currentPath=Xe.isLocal?Je.localPath||"/":Je.panPath||"/",Xe.callback=e=>{Xe.isLocal?Je.localPath=e:Je.panPath=e},void ll();var l})},null,8,["modelValue"])]),_:1})]),_:1}),t(kl,null,{default:n(()=>[t(xl,{cols:"12",md:"6"},{default:n(()=>[t(Vl,{modelValue:Je.downloadMediaInfo,"onUpdate:modelValue":he[12]||(he[12]=e=>Je.downloadMediaInfo=e),label:"下载媒体数据文件",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),t(xl,{cols:"12",md:"6"},{default:n(()=>[t(zl,{modelValue:Je.shareMinFileSizeFormatted,"onUpdate:modelValue":he[13]||(he[13]=e=>Je.shareMinFileSizeFormatted=e),label:"STRM最小文件大小",hint:"小于此值不生成STRM(K,M,G)","persistent-hint":"",variant:"outlined",density:"compact",placeholder:"例如: 100M",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(be,{type:"info",variant:"tonal",density:"compact",class:"mt-1"},{default:n(()=>he[106]||(he[106]=[o(" 分享链接/分享码和分享密码 只需要二选一配置即可。"),i("br",null,null,-1),o(" 同时填写分享链接，分享码和分享密码时，优先读取分享链接。 ")])),_:1})]),_:1}),t(Ze),t(Pl,{class:"px-3 py-1"},{default:n(()=>[t(Cl,{color:"grey",variant:"text",onClick:el,size:"small"},{default:n(()=>he[107]||(he[107]=[o("取消")])),_:1}),t(Ml),t(Cl,{color:"primary",variant:"text",onClick:nl,loading:Me.value,disabled:!Qe.value,size:"small"},{default:n(()=>he[108]||(he[108]=[o(" 开始同步 ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($l,{modelValue:Oe.show,"onUpdate:modelValue":he[25]||(he[25]=e=>Oe.show=e),"max-width":"800",persistent:""},{default:n(()=>[t(gl,null,{default:n(()=>[t(ve,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:n(()=>[t(ye,{icon:"mdi-cloud-download-outline",class:"mr-2",color:"primary",size:"small"}),he[109]||(he[109]=i("span",null,"115离线下载",-1)),t(Ml),t(Cl,{icon:"mdi-close",variant:"text",size:"small",onClick:ol})]),_:1}),t(_l,{class:"pa-0"},{default:n(()=>[t(El,{modelValue:Oe.activeTab,"onUpdate:modelValue":he[15]||(he[15]=e=>Oe.activeTab=e),"bg-color":"primary-gradient",grow:""},{default:n(()=>[t(Tl,{value:"tasks"},{default:n(()=>he[110]||(he[110]=[o("任务列表")])),_:1}),t(Tl,{value:"add"},{default:n(()=>he[111]||(he[111]=[o("添加任务")])),_:1})]),_:1},8,["modelValue"]),t(Fl,{modelValue:Oe.activeTab,"onUpdate:modelValue":he[24]||(he[24]=e=>Oe.activeTab=e),touchless:""},{default:n(()=>[t(Ll,{value:"tasks"},{default:n(()=>[i("div",{style:{"overflow-x":"auto"},onTouchstart:he[19]||(he[19]=g(()=>{},["stop"])),onTouchmove:he[20]||(he[20]=g(()=>{},["stop"])),onTouchend:he[21]||(he[21]=g(()=>{},["stop"]))},[Oe.error?(r(),c(be,{key:0,type:"error",density:"compact",class:"ma-3",variant:"tonal"},{default:n(()=>[o(s(Oe.error),1)]),_:1})):d("",!0),t(Ul,{headers:Oe.headers,items:Oe.tasks,"items-length":Oe.totalTasks,loading:Oe.loading,"items-per-page":Oe.itemsPerPage,"onUpdate:options":rl,density:"compact",class:"ma-2","no-data-text":"没有离线下载任务","loading-text":"正在加载任务...","items-per-page-text":"每页条目数",style:{"min-width":"700px"},onTouchstart:he[16]||(he[16]=g(()=>{},["stop"])),onTouchmove:he[17]||(he[17]=g(()=>{},["stop"])),onTouchend:he[18]||(he[18]=g(()=>{},["stop"]))},{"item.progress":n(({item:e})=>[i("div",ue,[t(bl,{"model-value":e.percent,color:ul(e.status),stream:0===e.status||3===e.status,striped:0===e.status||3===e.status,height:"8",rounded:"",class:"flex-grow-1 mr-3"},null,8,["model-value","color","stream","striped"]),i("div",me,s(e.percent)+"% ",1)])]),"item.status_text":n(({item:e})=>[t(Ae,{color:ul(e.status),size:"x-small",variant:"tonal"},{default:n(()=>[o(s(e.status_text),1)]),_:2},1032,["color"])]),_:1},8,["headers","items","items-length","loading","items-per-page"])],32)]),_:1}),t(Ll,{value:"add"},{default:n(()=>[i("div",pe,[Oe.addError?(r(),c(be,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal"},{default:n(()=>[o(s(Oe.addError),1)]),_:1})):d("",!0),t(Sl,{modelValue:Oe.links,"onUpdate:modelValue":he[22]||(he[22]=e=>Oe.links=e),label:"下载链接",hint:"每行一个链接，支持 http(s)/ftp/magnet/ed2k","persistent-hint":"",variant:"outlined",rows:"5",clearable:""},null,8,["modelValue"]),t(zl,{modelValue:Oe.destPath,"onUpdate:modelValue":he[23]||(he[23]=e=>Oe.destPath=e),label:"网盘保存路径 (可选)",hint:"可选，默认为网盘待整理目录","persistent-hint":"",variant:"outlined",density:"compact",class:"mt-3","append-inner-icon":"mdi-folder-network-outline","onClick:appendInner":dl,clearable:""},null,8,["modelValue"]),i("div",fe,[t(Cl,{color:"primary",onClick:cl,loading:Oe.adding,disabled:!Oe.links||Oe.adding,"prepend-icon":"mdi-plus"},{default:n(()=>he[112]||(he[112]=[o(" 添加任务 ")])),_:1},8,["loading","disabled"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($l,{modelValue:Xe.show,"onUpdate:modelValue":he[27]||(he[27]=e=>Xe.show=e),"max-width":"800"},{default:n(()=>[t(gl,null,{default:n(()=>[t(ve,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:n(()=>[t(ye,{icon:Xe.isLocal?"mdi-folder-search":"mdi-folder-network",class:"mr-2",color:"primary"},null,8,["icon"]),i("span",null,s(Xe.isLocal?"选择本地目录":"选择网盘目录"),1)]),_:1}),t(_l,{class:"px-3 py-2"},{default:n(()=>[Xe.loading?(r(),u("div",_e,[t(Bl,{indeterminate:"",color:"primary"})])):(r(),u("div",ge,[t(zl,{modelValue:Xe.currentPath,"onUpdate:modelValue":he[26]||(he[26]=e=>Xe.currentPath=e),label:"当前路径",variant:"outlined",density:"compact",class:"mb-2",onKeyup:h(ll,["enter"])},null,8,["modelValue"]),t(fl,{class:"border rounded","max-height":"300px","overflow-y":"auto"},{default:n(()=>["/"!==Xe.currentPath&&"C:\\"!==Xe.currentPath&&"C:/"!==Xe.currentPath?(r(),c(De,{key:0,onClick:al,class:"py-0",style:{"min-height":"auto"}},{prepend:n(()=>[t(ye,{icon:"mdi-arrow-up",size:"small",class:"mr-2",color:"grey"})]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>he[113]||(he[113]=[o("上级目录")])),_:1}),t(vl,null,{default:n(()=>he[114]||(he[114]=[o("..")])),_:1})]),_:1})):d("",!0),(r(!0),u(p,null,m(Xe.items,(e,l)=>(r(),c(De,{key:l,onClick:l=>(e=>{e&&e.is_dir&&e.path&&(Xe.currentPath=e.path,ll())})(e),disabled:!e.is_dir,class:"py-0",style:{"min-height":"auto"}},{prepend:n(()=>[t(ye,{icon:e.is_dir?"mdi-folder":"mdi-file",size:"small",class:"mr-2",color:e.is_dir?"success":"blue"},null,8,["icon","color"])]),default:n(()=>[t(ke,{class:"text-body-2"},{default:n(()=>[o(s(e.name),1)]),_:2},1024)]),_:2},1032,["onClick","disabled"]))),128)),Xe.items.length?d("",!0):(r(),c(De,{key:1,class:"py-2 text-center"},{default:n(()=>[t(ke,{class:"text-body-2 text-grey"},{default:n(()=>he[115]||(he[115]=[o("该目录为空或访问受限")])),_:1})]),_:1}))]),_:1})])),"/"!==Xe.currentPath||Xe.isLocal?d("",!0):(r(),c(be,{key:2,type:"warning",density:"compact",class:"mt-2 text-caption",variant:"tonal",icon:"mdi-alert-circle-outline"},{default:n(()=>he[116]||(he[116]=[o(" 115离线下载不支持选择根目录，请选择或进入一个子目录。 ")])),_:1})),Xe.error?(r(),c(be,{key:3,type:"error",density:"compact",class:"mt-2 text-caption",variant:"tonal"},{default:n(()=>[o(s(Xe.error),1)]),_:1})):d("",!0)]),_:1}),t(Pl,{class:"px-3 py-1"},{default:n(()=>[t(Ml),t(Cl,{color:"primary",onClick:tl,disabled:!Xe.currentPath||Xe.loading||"/"===Xe.currentPath&&!Xe.isLocal,variant:"text",size:"small"},{default:n(()=>he[117]||(he[117]=[o(" 选择当前目录 ")])),_:1},8,["disabled"]),t(Cl,{color:"grey",onClick:il,variant:"text",size:"small"},{default:n(()=>he[118]||(he[118]=[o(" 取消 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($l,{modelValue:Se.value,"onUpdate:modelValue":he[29]||(he[29]=e=>Se.value=e),"max-width":"450",persistent:""},{default:n(()=>[t(gl,null,{default:n(()=>[t(ve,{class:"text-h6 d-flex align-center"},{default:n(()=>[t(ye,{icon:"mdi-alert-circle-outline",color:"warning",class:"mr-2"}),he[119]||(he[119]=o(" 确认操作 "))]),_:1}),t(_l,null,{default:n(()=>he[120]||(he[120]=[o(" 您确定要立即执行全量同步吗？ ")])),_:1}),t(Pl,null,{default:n(()=>[t(Ml),t(Cl,{color:"grey",variant:"text",onClick:he[28]||(he[28]=e=>Se.value=!1),disabled:ze.value},{default:n(()=>he[121]||(he[121]=[o(" 取消 ")])),_:1},8,["disabled"]),t(Cl,{color:"warning",variant:"text",onClick:Ge,loading:ze.value},{default:n(()=>he[122]||(he[122]=[o(" 确认执行 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($l,{modelValue:Fe.value,"onUpdate:modelValue":he[31]||(he[31]=e=>Fe.value=e),"max-width":"450",persistent:""},{default:n(()=>[t(gl,null,{default:n(()=>[t(ve,{class:"text-h6 d-flex align-center"},{default:n(()=>[t(ye,{icon:"mdi-alert-circle-outline",color:"warning",class:"mr-2"}),he[123]||(he[123]=o(" 确认操作 "))]),_:1}),t(_l,null,{default:n(()=>he[124]||(he[124]=[o(" 您确定要立即执行全量同步数据库吗？该操作会覆盖原有数据库数据 ")])),_:1}),t(Pl,null,{default:n(()=>[t(Ml),t(Cl,{color:"grey",variant:"text",onClick:he[30]||(he[30]=e=>Fe.value=!1),disabled:Ve.value},{default:n(()=>he[125]||(he[125]=[o(" 取消 ")])),_:1},8,["disabled"]),t(Cl,{color:"warning",variant:"text",onClick:qe,loading:Ve.value},{default:n(()=>he[126]||(he[126]=[o(" 确认执行 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-87337440"]]);export{ke as default};
